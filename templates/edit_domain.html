{% extends "base.html" %}

{% block title %}Edit Domain - {{ domain.url }}{% endblock %}

{% block content %}
<div class="card">
    <h2>Edit Domain Settings</h2>
    <p style="color: #666; margin-bottom: 20px;">Domain: <strong>{{ domain.url }}</strong></p>

    <form method="POST">
        <div class="form-group">
            <label for="interval_minutes">Scraping Interval (minutes)</label>
            <select id="interval_minutes" name="interval_minutes">
                <option value="5" {% if domain.interval_minutes==5 %}selected{% endif %}>Every 5 minutes</option>
                <option value="15" {% if domain.interval_minutes==15 %}selected{% endif %}>Every 15 minutes</option>
                <option value="30" {% if domain.interval_minutes==30 %}selected{% endif %}>Every 30 minutes</option>
                <option value="60" {% if domain.interval_minutes==60 %}selected{% endif %}>Every 1 hour</option>
                <option value="180" {% if domain.interval_minutes==180 %}selected{% endif %}>Every 3 hours</option>
                <option value="360" {% if domain.interval_minutes==360 %}selected{% endif %}>Every 6 hours</option>
                <option value="720" {% if domain.interval_minutes==720 %}selected{% endif %}>Every 12 hours</option>
                <option value="1440" {% if domain.interval_minutes==1440 %}selected{% endif %}>Daily</option>
            </select>
        </div>

        <div class="form-group">
            <label for="crawl_depth">Crawl Depth (how deep to follow links)</label>
            <select id="crawl_depth" name="crawl_depth">
                <option value="1" {% if domain.get('crawl_depth', 2)==1 %}selected{% endif %}>1 level (homepage only)
                </option>
                <option value="2" {% if domain.get('crawl_depth', 2)==2 %}selected{% endif %}>2 levels (homepage +
                    linked pages)</option>
                <option value="3" {% if domain.get('crawl_depth', 2)==3 %}selected{% endif %}>3 levels (deep crawl)
                </option>
                <option value="4" {% if domain.get('crawl_depth', 2)==4 %}selected{% endif %}>4 levels (very deep)
                </option>
                <option value="5" {% if domain.get('crawl_depth', 2)==5 %}selected{% endif %}>5 levels (maximum)
                </option>
            </select>
        </div>

        <div class="form-group">
            <label for="max_pages">Maximum Pages to Crawl</label>
            <select id="max_pages" name="max_pages">
                <option value="10" {% if domain.get('max_pages', 100)==10 %}selected{% endif %}>10 pages</option>
                <option value="50" {% if domain.get('max_pages', 100)==50 %}selected{% endif %}>50 pages</option>
                <option value="100" {% if domain.get('max_pages', 100)==100 %}selected{% endif %}>100 pages</option>
                <option value="250" {% if domain.get('max_pages', 100)==250 %}selected{% endif %}>250 pages</option>
                <option value="500" {% if domain.get('max_pages', 100)==500 %}selected{% endif %}>500 pages</option>
                <option value="1000" {% if domain.get('max_pages', 100)==1000 %}selected{% endif %}>1000 pages</option>
            </select>
        </div>

        <div class="form-group">
            <label for="email">Email for Alerts</label>
            <input type="email" id="email" name="email" value="{{ domain.email }}" required>
        </div>

        <div style="display: flex; gap: 10px;">
            <button type="submit" class="btn">üíæ Save Changes</button>
            <a href="{{ url_for('routes.domain_profile', domain_id=domain.id) }}" class="btn"
                style="background: #999;">Cancel</a>
        </div>
    </form>
</div>

<div class="card">
    <h2>‚ÑπÔ∏è About Settings</h2>
    <p><strong>Crawl Depth:</strong> How many levels deep to follow links from the homepage.</p>
    <ul style="margin-left: 20px; margin-top: 10px;">
        <li><strong>1 level:</strong> Only scrape the homepage</li>
        <li><strong>2 levels:</strong> Homepage + all pages linked from homepage</li>
        <li><strong>3+ levels:</strong> Follow links recursively to specified depth</li>
    </ul>

    <p style="margin-top: 15px;"><strong>Maximum Pages:</strong> Stop crawling after this many pages to avoid excessive
        resource usage.</p>

    <p style="margin-top: 15px;"><strong>Note:</strong> Changes to these settings will apply to the next scheduled
        scrape.</p>
</div>
{% endblock %}